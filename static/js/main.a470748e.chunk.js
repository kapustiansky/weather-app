(this.webpackJsonpweather=this.webpackJsonpweather||[]).push([[0],{98:function(t,e,n){},99:function(t,e,n){"use strict";n.r(e);var a,r=n(4),c=n(0),i=n.n(c),o=n(9),s=n.n(o),u=n(36),l=n(54),j=n(12),d=n(22),f=n(17),h=n(38),m=n(37),b=n(141),p=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return e.reduceRight((function(t,e){return e(t)}),t)}},O=n(16),y=n(67),x=n.n(y),g=n(131),v=n(133),C=n(135),w=n(143),E=n(136),_=n(137),I=n(138),T=n(139),D=Object(g.a)({root:{maxWidth:250,background:"linear-gradient(0deg, rgb(255 255 255 / 0%) 0%, #f7f7f7 50%, rgb(255 255 255 / 0%) 100%)",margin:"auto",boxShadow:"none"},minMax:{width:"60%"},bg:{fontFamily:"'Merriweather', serif"},buttons:{paddingTop:0,justifyContent:"space-between"},fontTemp:Object(O.a)({fontSize:60},"@media (max-width:960px)",{fontSize:45}),fontCity:(a={fontSize:24},Object(O.a)(a,"@media (max-width:960px)",{fontSize:20}),Object(O.a)(a,"fontFamily","'Roboto Slab', serif"),a)}),S=function(t){var e=t.cityData,n=t.deleteCityItem,a=e.name,c=e.t,i=e.feels_like,o=e.temp_min,s=e.temp_max,u=e.icon,l=D();return Object(r.jsxs)(v.a,{className:l.root,children:[Object(r.jsxs)(C.a,{children:[Object(r.jsxs)(w.a,{children:[Object(r.jsxs)(w.a,{display:"flex",justifyContent:"space-evenly",alignItems:"center",children:[Object(r.jsx)("img",{src:"https://openweathermap.org/img/w/".concat(u,".png"),alt:"Icon current weather"}),Object(r.jsxs)(E.a,{className:l.fontTemp,variant:"h2",children:[c,"\u2103"]})]}),Object(r.jsxs)(E.a,{className:l.bg,variant:"subtitle2",children:["Feels Like:  ",i,"\u2103"]})]}),Object(r.jsx)(E.a,{className:l.fontCity,variant:"h5",component:"h1",children:a}),Object(r.jsxs)(w.a,{display:"flex",justifyContent:"space-between",className:l.minMax,children:[Object(r.jsxs)(E.a,{variant:"body2",component:"p",className:l.bg,children:["min: ",o,"\u2103"]}),Object(r.jsxs)(E.a,{variant:"body2",component:"p",className:l.bg,children:["max: ",s,"\u2103"]})]})]}),Object(r.jsxs)(_.a,{className:l.buttons,children:[Object(r.jsx)(I.a,{size:"small",children:"Learn More"}),Object(r.jsx)(T.a,{onClick:function(){var t=JSON.parse(localStorage.getItem("citisData")).filter((function(t){return t.id!==n().payload}));localStorage.setItem("citisData",JSON.stringify(t))},"aria-label":"delete",size:"small",children:Object(r.jsx)(x.a,{fontSize:"small"})})]})]})},k=n(30),M=i.a.createContext(),N=M.Provider,A=M.Consumer,F=function(){return function(t){return function(e){return Object(r.jsx)(A,{children:function(n){return Object(r.jsx)(t,Object(k.a)(Object(k.a)({},e),{},{weatherService:n}))}})}}},Y=function(t,e){return function(){e({type:"FETCH_CITY_REQUESTED"}),t.getCityData().then((function(t){return e({type:"FETCH_CITY_LOADED",payload:t})})).catch((function(t){return e({type:"FETCH_CITY_FAILURE",payload:t})}))}},L=function(){return Object(r.jsx)("div",{children:"Loading..."})},z=n(24),J=n(142),H=n(68),R=n(140),U=n(5),P=Object(H.a)({palette:{primary:{main:"#afafaf"}}}),W=localStorage.getItem("citisData")?JSON.parse(localStorage.getItem("citisData")):[],q="9db1d496a91bad902ebeff185ff91bdf",Q=function(t){Object(h.a)(n,t);var e=Object(m.a)(n);function n(){var t;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(t=e.call.apply(e,[this].concat(r))).state={value:""},t.onSubmit=function(e){e.preventDefault();var n=t.state.value.split(",")[0];t.setState({value:""});var a="https://api.openweathermap.org/data/2.5/weather?q=".concat(n,"&appid=").concat(q,"&units=metric");fetch(a).then((function(t){if(200===t.status)return t.json();throw 404===t.status?new Error("\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445 \u043f\u043e \u0432\u0430\u0448\u0435\u043c\u0443 \u0433\u043e\u0440\u043e\u0434\u0443! \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0432\u0432\u043e\u0434\u0430."):new Error("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437.")})).then((function(e){var n=e.id,a=e.name,r=e.main,c=r.feels_like,i=r.temp,o=r.temp_max,s=r.temp_min,u=Object(z.a)(e.weather,1)[0],l={id:n,name:a,t:Math.trunc(i),feels_like:Math.trunc(c),temp_min:Math.trunc(s),temp_max:Math.trunc(o),icon:u.icon};W.push({id:l.id,name:l.name}),localStorage.setItem("citisData",JSON.stringify(W)),setTimeout(t.props.onAddedNewCiy(l),400)})).catch((function(t){return alert(t.message)}))},t.onChange=function(e){t.setState({value:e.target.value})},t}return Object(f.a)(n,[{key:"render",value:function(){var t=this.props.classes;return Object(r.jsx)(R.a,{theme:P,children:Object(r.jsxs)("form",{onSubmit:this.onSubmit,className:t.form,children:[Object(r.jsx)(J.a,{onChange:this.onChange,value:this.state.value,className:t.input,label:"You City",color:"primary"}),Object(r.jsx)(I.a,{type:"submit",size:"small",children:"Add City"})]})})}}]),n}(c.Component),B=p(Object(U.a)({form:{display:"flex",justifyContent:"center"},input:{width:"70%"}}),Object(u.b)((function(t){return{city:t.city}}),(function(t){return{onAddedNewCiy:function(e){return t(function(t){return{type:"ITEM_ADDED_TO_CITY",payload:t}}(e))}}})))(Q),G=function(){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("div",{children:" Error "}),Object(r.jsx)(B,{})]})},K=function(t){var e=t.city,n=t.deleteCityItem;return Object(r.jsxs)(b.a,{container:!0,spacing:2,justify:"center",children:[e.map((function(t){return Object(r.jsx)(b.a,{item:!0,xs:6,sm:3,lg:2,children:Object(r.jsx)(S,{cityData:t,deleteCityItem:function(){return n(t.id)}})},t.id)})),Object(r.jsx)(b.a,{style:{padding:20},item:!0,xs:12,children:Object(r.jsx)(B,{})})]})},V=function(t){Object(h.a)(n,t);var e=Object(m.a)(n);function n(){return Object(d.a)(this,n),e.apply(this,arguments)}return Object(f.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchCitis()}},{key:"render",value:function(){var t=this.props,e=t.city,n=t.loading,a=t.error,c=t.deleteCityItem;return n?Object(r.jsx)(L,{}):a?Object(r.jsx)(G,{}):Object(r.jsx)(K,{city:e,deleteCityItem:c})}}]),n}(c.Component),X=p(F(),Object(u.b)((function(t){return{city:t.city,loading:t.loading,error:t.error}}),(function(t,e){var n=e.weatherService;return{fetchCitis:Y(n,t),deleteCityItem:function(e){return t({type:"ITEM_CITY_DELETE",payload:e})}}})))(V),Z=function(){return Object(r.jsx)(X,{})},$=function(){return Object(r.jsx)("div",{children:"CartPage"})},tt=function(){return Object(r.jsxs)(j.c,{children:[Object(r.jsx)(j.a,{path:"/",component:Z,exact:!0}),Object(r.jsx)(j.a,{path:"/cart",component:$})]})},et=function(t){Object(h.a)(n,t);var e=Object(m.a)(n);function n(){var t;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(t=e.call.apply(e,[this].concat(r))).state={hasError:!1},t}return Object(f.a)(n,[{key:"componentDidCatch",value:function(){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?Object(r.jsx)(G,{}):this.props.children}}]),n}(c.Component),nt=function(){function t(){Object(d.a)(this,t)}return Object(f.a)(t,[{key:"getWeatherData",value:function(){var t=[];return localStorage.getItem("citisData")?(JSON.parse(localStorage.getItem("citisData")).map((function(e){var n="https://api.openweathermap.org/data/2.5/weather?q=".concat(e.name,"&appid=").concat("9db1d496a91bad902ebeff185ff91bdf","&units=metric");fetch(n).then((function(t){if(200!==t.status)throw new Error("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a! \u041f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443.");return t.json()})).then((function(e){var n=e.id,a=e.name,r=e.main,c=r.feels_like,i=r.temp,o=r.temp_max,s=r.temp_min,u=Object(z.a)(e.weather,1)[0],l={id:n,name:a,t:Math.trunc(i),feels_like:Math.trunc(c),temp_min:Math.trunc(s),temp_max:Math.trunc(o),icon:u.icon};t.push(l)})).catch((function(t){if("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a! \u041f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443."!==t.message)throw t;alert(t.message)}))})),t):t}},{key:"getCityData",value:function(){var t=this.getWeatherData();return new Promise((function(e,n){setTimeout((function(){try{e(t)}catch(a){n(new Error("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a!!!"))}}),400)}))}}]),t}(),at=n(45),rt=n(19),ct={city:[],loading:!0,error:null},it=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ct,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"FETCH_CITY_REQUESTED":return{city:[],loading:!0,error:null};case"FETCH_CITY_LOADED":return{city:e.payload,loading:!1,error:null};case"FETCH_CITY_FAILURE":return{city:[],loading:!1,error:e.payload};case"ITEM_ADDED_TO_CITY":var n=e.payload;return Object(k.a)(Object(k.a)({},t),{},{city:[].concat(Object(rt.a)(t.city),[n])});case"ITEM_CITY_DELETE":var a=e.payload,r=t.city.filter((function(t){return t.id!==a}));return Object(k.a)(Object(k.a)({},t),{},{city:r});default:return t}},ot=Object(at.b)(it),st=(n(98),new nt);s.a.render(Object(r.jsx)(u.a,{store:ot,children:Object(r.jsx)(et,{children:Object(r.jsx)(N,{value:st,children:Object(r.jsx)(l.a,{children:Object(r.jsx)(tt,{})})})})}),document.getElementById("root"))}},[[99,1,2]]]);
//# sourceMappingURL=main.a470748e.chunk.js.map