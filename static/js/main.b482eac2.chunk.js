(this.webpackJsonpweather=this.webpackJsonpweather||[]).push([[0],{104:function(t,e,n){},105:function(t,e,n){"use strict";n.r(e);var a,r=n(3),c=n(0),i=n.n(c),o=n(9),s=n.n(o),l=n(38),u=n(56),d=n(12),j=n(20),h=n(16),f=n(32),m=n(31),b=n(144),p=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return e.reduceRight((function(t,e){return e(t)}),t)}},O=n(18),y=n(68),g=n.n(y),x=n(134),v=n(136),C=n(138),w=n(146),E=n(139),_=n(140),I=n(141),S=n(142),T=Object(x.a)({root:{maxWidth:250,background:"linear-gradient(0deg, rgb(255 255 255 / 0%) 0%, #f7f7f7 50%, rgb(255 255 255 / 0%) 100%)",margin:"auto",boxShadow:"none"},minMax:{width:"60%"},bg:{fontFamily:"'Merriweather', serif"},buttons:{paddingTop:0,justifyContent:"space-between"},fontTemp:Object(O.a)({fontSize:60},"@media (max-width:960px)",{fontSize:45}),fontCity:(a={fontSize:24},Object(O.a)(a,"@media (max-width:960px)",{fontSize:20}),Object(O.a)(a,"fontFamily","'Roboto Slab', serif"),a)}),D=function(t){var e=t.cityData,n=t.deleteCityItem,a=e.name,c=e.t,i=e.feels_like,o=e.temp_min,s=e.temp_max,l=e.icon,u=T();return Object(r.jsxs)(v.a,{className:u.root,children:[Object(r.jsxs)(C.a,{children:[Object(r.jsxs)(w.a,{children:[Object(r.jsxs)(w.a,{display:"flex",justifyContent:"space-evenly",alignItems:"center",children:[Object(r.jsx)("img",{src:"https://openweathermap.org/img/w/".concat(l,".png"),alt:"Icon current weather"}),Object(r.jsxs)(E.a,{className:u.fontTemp,variant:"h2",children:[c,"\u2103"]})]}),Object(r.jsxs)(E.a,{className:u.bg,variant:"subtitle2",children:["Feels Like:  ",i,"\u2103"]})]}),Object(r.jsx)(E.a,{className:u.fontCity,variant:"h5",component:"h1",children:a}),Object(r.jsxs)(w.a,{display:"flex",justifyContent:"space-between",className:u.minMax,children:[Object(r.jsxs)(E.a,{variant:"body2",component:"p",className:u.bg,children:["min: ",o,"\u2103"]}),Object(r.jsxs)(E.a,{variant:"body2",component:"p",className:u.bg,children:["max: ",s,"\u2103"]})]})]}),Object(r.jsxs)(_.a,{className:u.buttons,children:[Object(r.jsx)(I.a,{size:"small",children:"Learn More"}),Object(r.jsx)(S.a,{onClick:function(){var t=JSON.parse(localStorage.getItem("citisData")).filter((function(t){return t.id!==n().payload}));localStorage.setItem("citisData",JSON.stringify(t))},"aria-label":"delete",size:"small",children:Object(r.jsx)(g.a,{fontSize:"small"})})]})]})},k=n(15),N=i.a.createContext(),M=N.Provider,F=N.Consumer,A=function(){return function(t){return function(e){return Object(r.jsx)(F,{children:function(n){return Object(r.jsx)(t,Object(k.a)(Object(k.a)({},e),{},{weatherService:n}))}})}}},Y=function(t,e){return function(){e({type:"FETCH_CITY_REQUESTED"}),t.getCityData().then((function(t){return e({type:"FETCH_CITY_LOADED",payload:t})})).catch((function(t){return e({type:"FETCH_CITY_FAILURE",payload:t})}))}},z=function(){return Object(r.jsx)("div",{children:"Loading..."})},L=n(25),R=n(145),J=n(69),H=n(143),P=n(5),U=n(51),W=n.n(U),q=Object(J.a)({palette:{primary:{main:"#afafaf"}}}),B=localStorage.getItem("citisData")?JSON.parse(localStorage.getItem("citisData")):[],Q=function(t){Object(f.a)(n,t);var e=Object(m.a)(n);function n(t){var a;return Object(j.a)(this,n),(a=e.call(this,t)).handleChange=function(t){a.setState({address:t})},a.handleSelect=function(t){a.setState({address:t}),setTimeout((function(){a.onClick()}),40)},a.onClick=function(){var t=a.state.address.split(",")[0];a.setState({address:""});var e="https://api.openweathermap.org/data/2.5/weather?q=".concat(t,"&appid=").concat("9db1d496a91bad902ebeff185ff91bdf","&units=metric");fetch(e).then((function(t){if(200===t.status)return t.json();throw 404===t.status?new Error("\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445 \u043f\u043e \u0432\u0430\u0448\u0435\u043c\u0443 \u0433\u043e\u0440\u043e\u0434\u0443! \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0432\u0432\u043e\u0434\u0430."):new Error("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437.")})).then((function(t){var e=t.id,n=t.name,r=t.main,c=r.feels_like,i=r.temp,o=r.temp_max,s=r.temp_min,l=Object(L.a)(t.weather,1)[0],u={id:e,name:n,t:Math.trunc(i),feels_like:Math.trunc(c),temp_min:Math.trunc(s),temp_max:Math.trunc(o),icon:l.icon};B.push({id:u.id,name:u.name}),localStorage.setItem("citisData",JSON.stringify(B)),setTimeout(a.props.onAddedNewCiy(u),400)})).catch((function(t){return alert(t.message)}))},a.state={address:""},a}return Object(h.a)(n,[{key:"render",value:function(){var t=this,e=this.props.classes;return Object(r.jsx)(W.a,{value:this.state.address,onChange:this.handleChange,onSelect:this.handleSelect,children:function(n){var a=n.getInputProps,c=n.suggestions,i=n.getSuggestionItemProps;n.loading;return Object(r.jsx)(H.a,{theme:q,children:Object(r.jsxs)("form",{className:e.form,children:[Object(r.jsxs)(w.a,{className:e.box,children:[Object(r.jsx)(R.a,Object(k.a)(Object(k.a)({},a()),{},{label:"You City",color:"primary",className:e.input})),Object(r.jsx)("div",{children:c.map((function(t){var n=t.active?"suggestion-item--active":"suggestion-item",a=t.active?{cursor:"pointer",color:"#000000",fontSize:17,transition:"0.2s"}:{cursor:"pointer",color:"#7f7f7f",transition:"0.2s"};return Object(r.jsx)("div",Object(k.a)(Object(k.a)({},i(t,{className:n,style:a})),{},{children:Object(r.jsx)("span",{className:e.span,children:t.description})}),t.placeId)}))})]}),Object(r.jsx)(I.a,{className:e.button,onClick:t.onClick,size:"small",children:"Add City"})]})})}})}}]),n}(c.Component),G=p(Object(P.a)({form:{display:"flex",justifyContent:"center"},box:{width:"70%"},input:{width:"100%",marginBottom:5,fontFamily:"'Roboto Slab', serif"},button:{height:48},span:{padding:6,fontFamily:"'Roboto Slab', serif"}}),Object(l.b)((function(t){return{city:t.city}}),(function(t){return{onAddedNewCiy:function(e){return t(function(t){return{type:"ITEM_ADDED_TO_CITY",payload:t}}(e))}}})))(Q),K=function(){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("div",{children:" Error "}),Object(r.jsx)(G,{})]})},V=(i.a.Component,function(t){var e=t.city,n=t.deleteCityItem;return Object(r.jsxs)(b.a,{container:!0,spacing:2,justify:"center",children:[e.map((function(t){return Object(r.jsx)(b.a,{item:!0,xs:6,sm:3,lg:2,children:Object(r.jsx)(D,{cityData:t,deleteCityItem:function(){return n(t.id)}})},t.id)})),Object(r.jsx)(b.a,{style:{padding:20},item:!0,xs:12,children:Object(r.jsx)(G,{})})]})}),X=function(t){Object(f.a)(n,t);var e=Object(m.a)(n);function n(){return Object(j.a)(this,n),e.apply(this,arguments)}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchCitis()}},{key:"render",value:function(){var t=this.props,e=t.city,n=t.loading,a=t.error,c=t.deleteCityItem;return n?Object(r.jsx)(z,{}):a?Object(r.jsx)(K,{}):Object(r.jsx)(V,{city:e,deleteCityItem:c})}}]),n}(c.Component),Z=p(A(),Object(l.b)((function(t){return{city:t.city,loading:t.loading,error:t.error}}),(function(t,e){var n=e.weatherService;return{fetchCitis:Y(n,t),deleteCityItem:function(e){return t({type:"ITEM_CITY_DELETE",payload:e})}}})))(X),$=function(){return Object(r.jsx)(Z,{})},tt=function(){return Object(r.jsx)("div",{children:"CartPage"})},et=function(){return Object(r.jsxs)(d.c,{children:[Object(r.jsx)(d.a,{path:"/",component:$,exact:!0}),Object(r.jsx)(d.a,{path:"/cart",component:tt})]})},nt=function(t){Object(f.a)(n,t);var e=Object(m.a)(n);function n(){var t;Object(j.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(t=e.call.apply(e,[this].concat(r))).state={hasError:!1},t}return Object(h.a)(n,[{key:"componentDidCatch",value:function(){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?Object(r.jsx)(K,{}):this.props.children}}]),n}(c.Component),at=function(){function t(){Object(j.a)(this,t)}return Object(h.a)(t,[{key:"getWeatherData",value:function(){var t=[];return localStorage.getItem("citisData")?(JSON.parse(localStorage.getItem("citisData")).map((function(e){var n="https://api.openweathermap.org/data/2.5/weather?q=".concat(e.name,"&appid=").concat("9db1d496a91bad902ebeff185ff91bdf","&units=metric");fetch(n).then((function(t){if(200!==t.status)throw new Error("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a! \u041f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443.");return t.json()})).then((function(e){var n=e.id,a=e.name,r=e.main,c=r.feels_like,i=r.temp,o=r.temp_max,s=r.temp_min,l=Object(L.a)(e.weather,1)[0],u={id:n,name:a,t:Math.trunc(i),feels_like:Math.trunc(c),temp_min:Math.trunc(s),temp_max:Math.trunc(o),icon:l.icon};t.push(u)})).catch((function(t){if("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a! \u041f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443."!==t.message)throw t;alert(t.message)}))})),t):t}},{key:"getCityData",value:function(){var t=this.getWeatherData();return new Promise((function(e,n){setTimeout((function(){try{e(t)}catch(a){n(new Error("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a!!!"))}}),400)}))}}]),t}(),rt=n(45),ct=n(21),it={city:[],loading:!0,error:null},ot=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:it,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"FETCH_CITY_REQUESTED":return{city:[],loading:!0,error:null};case"FETCH_CITY_LOADED":return{city:e.payload,loading:!1,error:null};case"FETCH_CITY_FAILURE":return{city:[],loading:!1,error:e.payload};case"ITEM_ADDED_TO_CITY":var n=e.payload;return Object(k.a)(Object(k.a)({},t),{},{city:[].concat(Object(ct.a)(t.city),[n])});case"ITEM_CITY_DELETE":var a=e.payload,r=t.city.filter((function(t){return t.id!==a}));return Object(k.a)(Object(k.a)({},t),{},{city:r});default:return t}},st=Object(rt.b)(ot),lt=(n(104),new at);s.a.render(Object(r.jsx)(l.a,{store:st,children:Object(r.jsx)(nt,{children:Object(r.jsx)(M,{value:lt,children:Object(r.jsx)(u.a,{children:Object(r.jsx)(et,{})})})})}),document.getElementById("root"))}},[[105,1,2]]]);
//# sourceMappingURL=main.b482eac2.chunk.js.map